# =============================================================================
# FlowCatalyst Developer Build - Environment Configuration
# =============================================================================
# Copy this file to .env and modify as needed.
# All values shown are the defaults - uncomment and change only what you need.
# =============================================================================

# -----------------------------------------------------------------------------
# HTTP Server
# -----------------------------------------------------------------------------
# HTTP_PORT=8080

# -----------------------------------------------------------------------------
# MongoDB (Required - must be a replica set for change streams)
# -----------------------------------------------------------------------------
# By default, the start script launches MongoDB via Docker.
# Set EXTERNAL_MONGODB=true to use your own MongoDB instance instead.

# Use external MongoDB (no Docker required)
# EXTERNAL_MONGODB=false

# MongoDB connection string (replica set required for change streams)
# MONGODB_URI=mongodb://localhost:27017/?replicaSet=rs0&directConnection=true
# MONGODB_DATABASE=flowcatalyst

# Docker compose MongoDB port mapping (only used when EXTERNAL_MONGODB=false)
# MONGODB_PORT=27017

# -----------------------------------------------------------------------------
# Queue Database Path
# -----------------------------------------------------------------------------
# Path for SQLite queue database (shared by message-router and dispatch-scheduler)
# QUEUE_DB_PATH=./data/flowcatalyst-queue.db

# -----------------------------------------------------------------------------
# Outbox Processor (Optional)
# -----------------------------------------------------------------------------
# The outbox processor connects to YOUR application's database where
# the FlowCatalyst SDK has created the outbox tables.
#
# Flow:
# 1. Your app uses the FlowCatalyst SDK (Laravel, etc.)
# 2. SDK migrations create outbox tables in your app's database
# 3. Your app writes events/dispatch jobs to the outbox within transactions
# 4. This dev build's outbox processor polls your database and sends to platform

# Enable outbox processor
# OUTBOX_ENABLED=false

# Database type your application uses: POSTGRESQL, MYSQL, or MONGODB
# OUTBOX_DB_TYPE=POSTGRESQL

# Connection to YOUR application's database (where SDK created the outbox tables)
# PostgreSQL example:
# OUTBOX_DB_KIND=postgresql
# OUTBOX_DB_URL=jdbc:postgresql://localhost:5432/your_app_database
# OUTBOX_DB_USER=your_db_user
# OUTBOX_DB_PASS=your_db_password

# MySQL example:
# OUTBOX_DB_TYPE=MYSQL
# OUTBOX_DB_KIND=mysql
# OUTBOX_DB_URL=jdbc:mysql://localhost:3306/your_app_database
# OUTBOX_DB_USER=your_db_user
# OUTBOX_DB_PASS=your_db_password

# -----------------------------------------------------------------------------
# Mongo Express UI (Optional)
# -----------------------------------------------------------------------------
# Port for Mongo Express web UI (start with --profile tools)
# MONGO_EXPRESS_PORT=8081

# =============================================================================
# Quick Start
# =============================================================================
#
# 1. Start MongoDB:
#    docker compose up -d
#
# 2. Start FlowCatalyst dev build:
#    ./scripts/start.sh
#
# 3. (Optional) Enable outbox processing for your app:
#    - Ensure your app has FlowCatalyst SDK installed with migrations run
#    - Set OUTBOX_ENABLED=true
#    - Configure OUTBOX_DB_* to point to your app's database
#    - Restart the dev build
#
# Access points:
#   - FlowCatalyst API: http://localhost:8080
#   - Mongo Express:    http://localhost:8081 (with --profile tools)
# =============================================================================
